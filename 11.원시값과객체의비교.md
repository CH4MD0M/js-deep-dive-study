### 원시 값

-   변경 불가능한 값이다.
-   원시 값을 변수에 할당하면 변수에는 **실제 값**이 저장된다.
-   원시 값을 갖는 변수를 다른 변수에 할당하면 원본의 원시 값이 복사되어 전달된다.**`(Pass by Value)`**

### 객체

-   변경 가능한 값이다.
-   객체를 변수에 할당하면 변수에는 **참조 값**이 저장된다.
-   객체를 가리키는 변수를 다른 변수에 할당하면 원본의 참조 값이 복사되어 전달된다.**`(Pass by Reference)`**

<br><br>

# 원시 값

### 변경 불가능한 값

**원시 값은 변경 불가능한 값(Immutable Value)이다.** 즉, **`읽기 전용(read-only)`** 값이다.

<br>

**변수**는 하나의 값을 저장하기 위해 확보한 **메모리 공간 자체** 또는 그 메모리 공간을 식별하기 위해 붙인 이름이고, **값**은 변수에 저장된 **데이터**로서 표현식이 평가되어 생성된 결과를 말한다. _**변경 불가능하다는 것은 변수가 아니라 값에 대한 진술이다.**_

**`원시 값은 변경 불가능하다.`** 는 말은 원시 값 자체를 변경할 수 없다는 것이지 **변수 값을 변경할 수 없다는 것이 아니다.** 변수는 언제든지 재할당을 통해 변수 값을 변경(엄밀히 말하면 교체)할 수 있다.

⭐⭐ 변수 값을 변경하기 위해 원시 값을 재할당하면 새로운 메모리 공간을 확보하고 재할당한 값을 저장한 후, 변수가 참조하던 메모리 공간의 주소를 변경한다.
([Chapter4. 변수](https://github.com/CH4MD0M/js-deep-dive-study/blob/main/4-변수.md))

-   **변수가 참조하던 메모리 공간의 주소가 변경된 이유는 원시 값이 변경 불가능한 값이기 때문이다.**
-   불변성을 갖는 원시 값을 할당한 변수는 재할당 이외에 변수 값을 변경할 수 있는 방법이 없다.

<br>

### 문자열과 불변성

**ECMAScript 사양에 문자열 타입(2byte)과 숫자 타입(8byte) 이외의 원시 타입은 크기를 명확히 규정하고 있지는 않아서** 브라우저에 따라서 타입의 크기는 다를 수 있다.

문자열은 **`유사 배열 객체`** 이면서 **`이터러블`** 이므로 배열과 유사하게 각 문자에 접근할 수 있다.

> ✍🏻 **유사 배열 객체(Array-like Object)**
> 유사 배열 객체란 마치 배열처럼 인덱스로 프로퍼티 값에 접근할 수 있고 length 프로퍼티를 갖는 객체를 말한다.

<br>

```jsx
var str = "hello";
str = "world";

str[0] = "W";

console.log(str); // world
```

**문자열은 변경 불가능한 값이기 때문에** 할당 된 변수를 변경(재할당)할 수는 있지만, 문자열을 변경하는 것은 불가능하다.

<br>

### ⭐⭐ 값에 의한 전달

```jsx
var score = 80;
var copy = score;

console.log(score); // 80
console.log(copy); // 80

score = 100;

console.log(score); // 100
console.log(copy); // 80
```

변수에 원시 값을 갖는 변수를 할당하면 할당받는 변수(copy)에는 할당되는 변수(score)의 원시 값이 복사되어 전달된다.

score 변수와 copy 변수의 값 80은 _**다른 메모리 공간에 저장된 별개의 값이다.**_ 따라서 score 변수의 값을 변경해도 copy 변수의 값에는 _**어떠한 영향도 주지 않는다.**_

<br>

> **“값에 의한 전달"이라는 용어는 자바스크립트를 위한 용어가 아니므로 오해가 있을 수 있다.**

-   엄격하게 표현하면 변수에 값이 전달되는 것이 아니라 메모리 주소가 전달되는 것이다.
-   이는 변수와 같은 식별자는 값이 아니라 메모리 주소를 기억하고 있기 때문이다.

<div align="center">
<img width="600" src="https://user-images.githubusercontent.com/54847910/158762059-11b95496-d05f-4ac2-bc8c-8189518a6f24.png"/>
</div>
<br>

<div align="center">
<img width="600" src="https://user-images.githubusercontent.com/54847910/158762078-3f437332-9b02-42cc-995a-09fc8189eb60.png"/>
</div>

```jsx
var copy = score;
```

위 코드는 두 가지 평가 방식이 가능하다.

1. 새로운 80을 생성해서 메모리 주소를 전달하는 방식(그림11-4). **이 방식은 할당시점에 두 변수가 기억하는 메모리 주소가 다르다.**
2. score의 변수값 80의 메모리 주소를 그대로 전달하는 방식(그림11-5). **이 방식은 할당시점에 두 변수가 기억하는 메모리 주소가 같다.**

**`값의 의한 전달`도 사실은 값을 전달하는 것이 아니라 메모리 주소를 전달한다. 단, 전달된 메모리 주소를 통해 메모리 공간에 접근하면 값을 참조할 수 있다.**

<br><br>

# 객체

객체는 원시 값과 같이 확보해야 할 메모리 공간의 크기를 사전에 정해 둘 수 없다.

객체는 복합적인 자료구조이므로 객체를 관리하는 방식이 원시 값과 비교해서 복잡하고 구현 방식도 브라우저 제조사마다 다를 수 있다.

<br>

### 변경 가능한 값

_**객체는 변경 가능한 값(Mutable Value)이다.**_

```jsx
var person = {
    name: "Roh",
};
```

<div align="center">
<img width="300" src="https://user-images.githubusercontent.com/54847910/158762080-aeb26043-2ef5-4022-a038-56e7e0d22ec9.png"/>
</div>

원시 값을 할당한 변수를 참조하면 메모리에 저장되어 있는 원시 값에 접근한다. 하지만, 객체를 할당한 변수를 참조하면 _**메모리에 저장되어 있는 참조 값을 통해 실제 객체에 접근한다.**_

> ✍🏻 **참조값** <br>
> 참조 값은 생성된 객체가 실제로 저장된 메모리 공간의 주소이다.

<br>

```jsx
person.name = "Kim";
person.address = "Seoul";
```

<div align="center">
<img width="300" src="https://user-images.githubusercontent.com/54847910/158762081-15db417b-fe1f-450b-9b77-a7fc9dc9036d.png"/>
</div>

객체는 변경 가능한 값이므로 메모리에 저장된 객체를 직접 수정할 수 있다. 이때 **객체를 할당한 변수의 참조 값은 변경되지 않는다.**

<br>

> ✍🏻 **얕은 복사(Shallow Copy)와 깊은 복사(Deep Copy)**<br>
> 객체를 프로퍼티 값으로 갖는 객체의 경우 **얕은 복사**는 한 단계까지만 복사하는 것을 말하고<br> > **깊은 복사**는 객체에 중첩되어 있는 객체까지 모두 복사하는 것을 말한다.

<br>

### 참조에 의한 전달

```jsx
var person = {
    name: "Roh",
};

// 참조 값을 복사
var copy = person;
```

객체를 가리키는 변수를 다른 변수에 할당하면 _**원본의 참조 값이 복사되어 전달된다.**_ 이를 **`참조에 의한 전달`** 이라 한다.

원본 person과 사본 copy는 저장된 메모리 주소는 다르지만 **동일한 참조 값을 갖는다.** 이것은 **두 개의 식별자가 하나의 객체를 공유**한다는 것을 의미한다. 따라서 원본 또는 사본 중 어느 한쪽에서 객체를 변경하면 **서로 영향을 주고받는다.**

<div align="center">
<img width="600" src="https://user-images.githubusercontent.com/54847910/158762073-4a4de431-26f0-4013-88c1-bddcf13580d0.png"/>
</div>

<br><br>

# 정리

**`값에 의한 전달`** 과 **`참조에 의한 전달`** 은 식별자가 기억하는 메모리 공간에 저장되어 있는 값을 복사해서 전달한다는면에서 동일하다. 다만 변수에 저장되어 있는 값이 **원시 값이냐 참조 값이냐의 차이**만 있을 뿐이다.

따라서, _**자바스크립트에는 참조에 의한 전달은 존재하지 않고 값에 의한 전달만이 존재한다고 말할 수 있다.**_
